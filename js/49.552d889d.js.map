{"version":3,"file":"js/49.552d889d.js","mappings":"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","sources":["webpack://vueproject/./src/views/element/forumView.vue","webpack://vueproject/src/views/element/forumView.vue","webpack://vueproject/./src/views/element/forumView.vue?df93","webpack://vueproject/./src/views/element/forumView.vue?3fc6"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-container',[_c('el-header',{staticClass:\"el-icon-connection\",staticStyle:{\"font-size\":\"48px\",\"background-color\":\"rgb(112, 204, 190)\"}},[_vm._v(\"---交流论坛\")]),_c('el-main',[_c('el-button',{on:{\"click\":function($event){_vm.dialogVisible = true}}},[_vm._v(\"发布观点\")]),_c('el-dialog',{attrs:{\"title\":\"发布帖子\",\"visible\":_vm.dialogVisible,\"width\":\"30%\",\"before-close\":_vm.handleClose},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('span',[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.message,\"show-message\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"title\"}},[_c('el-input',{staticStyle:{\"width\":\"84%\"},attrs:{\"placeholder\":\"标题不超过20个字\",\"maxlength\":\"20\",\"show-word-limit\":\"\"},model:{value:(_vm.message.title),callback:function ($$v) {_vm.$set(_vm.message, \"title\", $$v)},expression:\"message.title\"}})],1),_c('el-form-item',{attrs:{\"label\":\"content\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"autosize\":{ minRows: 2, maxRows: 6 },\"placeholder\":\"请输入内容,小于420字\",\"maxlength\":\"420\",\"show-word-limit\":\"\"},model:{value:(_vm.message.content),callback:function ($$v) {_vm.$set(_vm.message, \"content\", $$v)},expression:\"message.content\"}})],1)],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogVisible = false}}},[_vm._v(\"取消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.post}},[_vm._v(\"发布\")])],1)]),_vm._l((this.info_item),function(item){return _c('div',{key:item.title,staticStyle:{\"background-color\":\"rgb(219, 219, 219)\"}},[_c('p',{staticStyle:{\"font-weight\":\"bold\"}},[_c('span',{staticStyle:{\"color\":\"red\"}},[_vm._v(\"主题: \"+_vm._s(item.title))]),_vm._v(\"      \"),_c('span',{staticStyle:{\"color\":\"rgb(112, 204, 190)\"}},[_vm._v(\"发布者:  \"+_vm._s(item.user))]),_vm._v(\"      发布时间:  \"+_vm._s(item.time)),_c('span',{staticStyle:{\"color\":\"rgb(217, 120, 250)\"}},[_vm._v(\"      文章id:  \"+_vm._s(item.collect_id))])]),_c('p',[_vm._v(_vm._s(item.content))]),_c('el-button',{staticStyle:{\"float\":\"right\"},attrs:{\"type\":\"primary\",\"icon\":\"el-icon-star-off\",\"circle\":\"true\",\"round\":\"true\"},on:{\"click\":function($event){return _vm.collect(item)}}},[_vm._v(_vm._s(item.flag))]),_c('br'),_c('br'),_c('hr')],1)})],2)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <el-container>\r\n    <el-header\r\n      style=\"font-size: 48px; background-color: rgb(112, 204, 190)\"\r\n      class=\"el-icon-connection\"\r\n      >---交流论坛</el-header\r\n    >\r\n    <el-main>\r\n      <el-button @click=\"dialogVisible = true\">发布观点</el-button>\r\n      <el-dialog\r\n        title=\"发布帖子\"\r\n        :visible.sync=\"dialogVisible\"\r\n        width=\"30%\"\r\n        :before-close=\"handleClose\"\r\n      >\r\n        <span>\r\n          <el-form ref=\"form\" :model=\"message\" show-message=\"80px\">\r\n            <el-form-item label=\"title\">\r\n              <el-input\r\n                v-model=\"message.title\"\r\n                style=\"width: 84%\"\r\n                placeholder=\"标题不超过20个字\"\r\n                maxlength=\"20\"\r\n                show-word-limit\r\n              ></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"content\">\r\n              <el-input\r\n                type=\"textarea\"\r\n                :autosize=\"{ minRows: 2, maxRows: 6 }\"\r\n                placeholder=\"请输入内容,小于420字\"\r\n                v-model=\"message.content\"\r\n                maxlength=\"420\"\r\n                show-word-limit\r\n              >\r\n              </el-input>\r\n            </el-form-item>\r\n          </el-form>\r\n        </span>\r\n        <span slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"dialogVisible = false\">取消</el-button>\r\n          <el-button type=\"primary\" @click=\"post\">发布</el-button>\r\n        </span>\r\n      </el-dialog>\r\n      <div\r\n        v-for=\"item in this.info_item\"\r\n        :key=\"item.title\"\r\n        style=\"background-color: rgb(219, 219, 219)\"\r\n      >\r\n        <p style=\"font-weight: bold\">\r\n          <span style=\"color: red\">主题:&nbsp;{{ item.title }}</span\r\n          >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span\r\n            style=\"color: rgb(112, 204, 190)\"\r\n            >发布者:&nbsp;&nbsp;{{ item.user }}</span\r\n          >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;发布时间:&nbsp;&nbsp;{{\r\n            item.time\r\n          }}<span style=\"color: rgb(217, 120, 250)\"\r\n            >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;文章id:&nbsp;&nbsp;{{\r\n              item.collect_id\r\n            }}</span\r\n          >\r\n        </p>\r\n        <p>{{ item.content }}</p>\r\n        <el-button\r\n          type=\"primary\"\r\n          icon=\"el-icon-star-off\"\r\n          circle=\"true\"\r\n          round=\"true\"\r\n          @click=\"collect(item)\"\r\n          style=\"float: right\"\r\n          >{{ item.flag }}</el-button\r\n        >\r\n        <br /><br />\r\n        <hr />\r\n      </div>\r\n    </el-main>\r\n  </el-container>\r\n</template>\r\n\r\n<script>\r\nimport main from \"D:/EdgeDownload/vueGUI/vueproject/src/main.js\";\r\nconst axios = require(\"axios\");\r\nexport default {\r\n  data() {\r\n    return {\r\n      User: {\r\n        name: main.user.username,\r\n      },\r\n      dialogVisible: false,\r\n      message: {\r\n        title: \"\",\r\n        content: \"\",\r\n        time: \"\",\r\n        collect_id: \"\",\r\n      },\r\n      info_item: [],\r\n    };\r\n  },\r\n  methods: {\r\n    post() {\r\n      if (this.message.title == \"\") {\r\n        this.$alert(\"标题不能为空\", \"警告\", {\r\n          confirmButtonText: \"确定\",\r\n          callback: (action) => {\r\n            this.$message({\r\n              type: \"info\",\r\n              message: `action: ${action}`,\r\n            });\r\n          },\r\n        });\r\n      } else if (this.message.content == \"\") {\r\n        this.$alert(\"内容不能为空\", \"警告\", {\r\n          confirmButtonText: \"确定\",\r\n          callback: (action) => {\r\n            this.$message({\r\n              type: \"info\",\r\n              message: `action: ${action}`,\r\n            });\r\n          },\r\n        });\r\n      } else {\r\n        const now = new Date();\r\n        const year = now.getFullYear();\r\n        const month = (\"0\" + (now.getMonth() + 1)).slice(-2);\r\n        const day = (\"0\" + now.getDate()).slice(-2);\r\n        const hours = (\"0\" + now.getHours()).slice(-2);\r\n        const minutes = (\"0\" + now.getMinutes()).slice(-2);\r\n        const seconds = (\"0\" + now.getSeconds()).slice(-2);\r\n        this.message.time =\r\n          year +\r\n          \"年\" +\r\n          month +\r\n          \"月\" +\r\n          day +\r\n          \"日\" +\r\n          hours +\r\n          \"时\" +\r\n          minutes +\r\n          \"分\" +\r\n          seconds +\r\n          \"秒\";\r\n        this.message.collect_id =\r\n          this.User.name + year + day + hours + minutes + seconds;\r\n        axios\r\n          .post(\r\n            main.url + \"/publish\",\r\n            {\r\n              user_name: this.User.name,\r\n              title: this.message.title,\r\n              content: this.message.content,\r\n              time: this.message.time,\r\n              collect_id: this.message.collect_id,\r\n            },\r\n            {\r\n              headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\r\n              emulateJSON: true,\r\n            }\r\n          )\r\n          .then((res) => {\r\n            if (res.data) {\r\n              this.$message({\r\n                message: \"发布成功\",\r\n                type: \"success\",\r\n                duration: 1000,\r\n              });\r\n              this.info_item = [];\r\n              for (var i = 0; i < res.data.length; i++) {\r\n                var a = {};\r\n                a[\"title\"] = res.data[i][\"title\"];\r\n                a[\"user\"] = res.data[i][\"user\"];\r\n                a[\"content\"] = res.data[i][\"content\"];\r\n                a[\"time\"] = res.data[i][\"time\"];\r\n                a[\"collect_id\"] = res.data[i][\"collect_id\"];\r\n                a[\"flag\"] = res.data[i][\"flag\"];\r\n                this.info_item.push(a);\r\n              }\r\n              axios\r\n                .post(\r\n                  main.url + \"/collect/get_info\",\r\n                  {\r\n                    username: main.user.username,\r\n                    collect_type: \"论坛文章\",\r\n                  },\r\n                  {\r\n                    headers: {\r\n                      \"Content-Type\": \"application/x-www-form-urlencoded\",\r\n                    },\r\n                    emulateJSON: true,\r\n                  }\r\n                )\r\n                .then((res) => {\r\n                  for (var k = 0; k < this.info_item.length; k++) {\r\n                    this.info_item[k].flag = \"未收藏\";\r\n                  }\r\n                  if (res.data) {\r\n                    for (var j = 0; j < res.data.length; j++) {\r\n                      for (var i = 0; i < this.info_item.length; i++) {\r\n                        if (\r\n                          this.info_item[i].collect_id == res.data[j].collect_id\r\n                        ) {\r\n                          this.info_item[i].flag = \"已收藏\";\r\n                          break;\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                });\r\n            }\r\n          });\r\n        this.dialogVisible = false;\r\n      }\r\n    },\r\n    //点击收藏按钮（收藏与未收藏两种状态）\r\n    collect(item) {\r\n      axios\r\n        .post(\r\n          main.url + \"/collect/collected\",\r\n          {\r\n            username: main.user.username,\r\n            password: main.user.password,\r\n            collect_id: item.collect_id,\r\n            collect_type: \"论坛文章\",\r\n            flag: item.flag,\r\n          },\r\n          {\r\n            headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\r\n            emulateJSON: true,\r\n          }\r\n        )\r\n        .then((res) => {\r\n          if (res.data) {\r\n            if (item.flag == \"已收藏\") {\r\n              this.$message({\r\n                message: \"取消收藏成功\",\r\n                type: \"success\",\r\n                duration: 1000,\r\n              });\r\n            } else {\r\n              this.$message({\r\n                message: \"收藏成功\",\r\n                type: \"success\",\r\n                duration: 1000,\r\n              });\r\n            }\r\n            axios\r\n              .post(\r\n                main.url + \"/collect/get_info\",\r\n                {\r\n                  username: main.user.username,\r\n                  collect_type: \"论坛文章\",\r\n                },\r\n                {\r\n                  headers: {\r\n                    \"Content-Type\": \"application/x-www-form-urlencoded\",\r\n                  },\r\n                  emulateJSON: true,\r\n                }\r\n              )\r\n              .then((res) => {\r\n                for (var k = 0; k < this.info_item.length; k++) {\r\n                  this.info_item[k].flag = \"未收藏\";\r\n                }\r\n                if (res.data) {\r\n                  for (var j = 0; j < res.data.length; j++) {\r\n                    for (var i = 0; i < this.info_item.length; i++) {\r\n                      if (\r\n                        this.info_item[i].collect_id == res.data[j].collect_id\r\n                      ) {\r\n                        this.info_item[i].flag = \"已收藏\";\r\n                        break;\r\n                      }\r\n                    }\r\n                  }\r\n                }\r\n              });\r\n          }\r\n        });\r\n    },\r\n  },\r\n  mounted() {\r\n    if (!main.user.username || !main.user.password) {\r\n      this.$message.error(\"你还没有登录账号，禁止访问其他页面！！！\");\r\n      this.$router.push(\"/log\");\r\n    } else {\r\n      //获取已经发布的\r\n      axios\r\n        .post(main.url + \"/load_message\", {\r\n          headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\r\n          emulateJSON: true,\r\n        })\r\n        .then((res) => {\r\n          this.info_item = [];\r\n          if (res.data) {\r\n            for (var i = 0; i < res.data.length; i++) {\r\n              var a = {};\r\n              a[\"title\"] = res.data[i][\"title\"];\r\n              a[\"user\"] = res.data[i][\"user\"];\r\n              a[\"content\"] = res.data[i][\"content\"];\r\n              a[\"time\"] = res.data[i][\"time\"];\r\n              a[\"collect_id\"] = res.data[i][\"collect_id\"];\r\n              a[\"flag\"] = res.data[i][\"flag\"];\r\n              this.info_item.push(a);\r\n            }\r\n            console.log(this.info_item);\r\n            //获取收藏信息\r\n            axios\r\n              .post(\r\n                main.url + \"/collect/get_info\",\r\n                {\r\n                  username: main.user.username,\r\n                  collect_type: \"论坛文章\",\r\n                },\r\n                {\r\n                  headers: {\r\n                    \"Content-Type\": \"application/x-www-form-urlencoded\",\r\n                  },\r\n                  emulateJSON: true,\r\n                }\r\n              )\r\n              .then((res) => {\r\n                if (res.data) {\r\n                  for (var j = 0; j < res.data.length; j++) {\r\n                    for (var i = 0; i < this.info_item.length; i++) {\r\n                      if (\r\n                        this.info_item[i].collect_id == res.data[j].collect_id\r\n                      ) {\r\n                        this.info_item[i].flag = \"已收藏\";\r\n                        break;\r\n                      }\r\n                    }\r\n                  }\r\n                }\r\n              });\r\n          }\r\n        });\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./forumView.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./forumView.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./forumView.vue?vue&type=template&id=525074d3\"\nimport script from \"./forumView.vue?vue&type=script&lang=js\"\nexport * from \"./forumView.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","staticStyle","_v","on","$event","dialogVisible","attrs","handleClose","ref","message","model","value","title","callback","$$v","$set","expression","minRows","maxRows","content","slot","post","_l","info_item","item","key","_s","user","time","collect_id","collect","flag","staticRenderFns","axios","require","data","User","name","main","username","methods","$alert","confirmButtonText","action","$message","type","now","Date","year","getFullYear","month","getMonth","slice","day","getDate","hours","getHours","minutes","getMinutes","seconds","getSeconds","url","user_name","headers","emulateJSON","then","res","duration","i","length","a","push","collect_type","k","j","password","mounted","console","log","error","$router","component"],"sourceRoot":""}